[app]
name = "チャットボットシステム"
version = "1.0.0"
debug = false

[backend]
host = "0.0.0.0"
port = 8000
reload = true

[frontend]
host = "localhost"
port = 3000

[cors]
origins = [ "http://localhost:3000", "http://localhost:5173",]

[qdrant]
host = "localhost"
port = 6333
grpc_port = 6334
collection_name = "chatbot_knowledge"


[llm]
provider = "カスタム"
api_base = "https://your-api-base-url.com/v1"
api_key = "your-api-key-here"
model_name = "your-model-name"
temperature = 0.7
max_tokens = 128000
top_p = 1.0
frequency_penalty = 0.0
presence_penalty = 0.0

[embedding]
provider = "ollama"
base_url = "http://localhost:11434"
model_name = "nomic-embed-text:latest"
api_key = ""
# ⚠️ 重要警告: dimensionの値を変更すると既存のベクターデータベースにアクセスできなくなります
# ⚠️ この値を変更する前に、必ずベクターデータベースのバックアップを作成してください
# ⚠️ 変更後は、ベクターデータベースが自動的に再作成されます（既存データは削除されます）
# ⚠️ 自動再作成機能: 次元数不一致を検出すると、アプリケーション起動時に自動的にコレクションを再作成します
# ⚠️ 変更手順:
# 1. 既存データをエクスポートまたはバックアップ
# 2. このdimension値を新しいモデルの次元数に更新
# 3. アプリケーションを再起動（自動的に新しい次元数でコレクションが作成されます）
# 4. バックアップからデータを再登録
dimension = 768

[upload]
directory = "./uploads"
max_file_size = 10485760

[database]
host = "localhost"
port = 3306
username = "root"
password = "your-password-here"
database = "chatbot"
ssl = false
pool_size = 20
max_overflow = 30
pool_recycle = 3600
echo_sql = false

[security]
secret_key = "your-secret-key-here"
algorithm = "HS256"
access_token_expire_minutes = 30

[chat]
max_history = 10
prompt_template = """你是一个智能的AI助手，具备以下能力和特点：

## 角色定义
- 你是一个专业、友好、有帮助的AI助手
- 你能够基于提供的知识库信息回答问题，也能处理一般性问题
- 你会保持对话的连贯性和上下文理解

## 行为准则
1. **优先使用知识库信息**：当提供的上下文包含相关信息时，优先基于这些信息回答
2. **智能回退机制**：当知识库中没有相关信息时，可以基于你的一般知识提供有用的回答
3. **诚实透明**：明确区分哪些信息来自知识库，哪些是基于一般知识的回答
4. **保持连贯性**：结合会话历史，理解用户的真实意图和上下文

## 回答策略
- 所有的回答限制在200字以内
- 如果上下文中有相关信息：基于上下文提供准确、详细的回答
- 如果上下文中没有相关信息但问题属于常识范围：提供基于一般知识的进行回答，不用特别说明这些回答超出上下文
- 如果问题超出能力范围：尝试提供相关的建议或指导

## 当前对话信息
会话历史:
{chat_history}

知识库上下文:
{context}

用户问题: {question}

## 回答要求
请基于以上信息提供有用、准确的回答。如果使用了知识库信息，请在回答中体现；如果基于一般知识回答，请适当说明。

回答:"""
user_label = "用户"
assistant_label = "助手"

[logging]
level = "DEBUG"
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
file = "app.log"